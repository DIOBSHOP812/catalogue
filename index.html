<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DIOBSHOP - Catalogue Professionnel</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            color: #333;
            background-color: #f8f9fa;
        }

        /* Header Styles */
        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 0.6rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-top {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 0.8rem;
            margin-bottom: 0.3rem;
        }

        .header-logo {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.2);
        }

        .header h1 {
            font-size: 1.6rem;
            margin: 0;
            font-weight: bold;
        }

        .header p {
            font-size: 0.85rem;
            opacity: 0.9;
            margin: 0;
        }

        /* Footer Styles */
        .footer {
            background: linear-gradient(135deg, #2c3e50 0%, #34495e 100%);
            color: white;
            padding: 1.2rem 0;
            text-align: center;
            margin-top: 2rem;
        }

        .footer-content {
            max-width: 600px;
            margin: 0 auto;
            padding: 0 1rem;
        }

        .footer h3 {
            font-size: 1.1rem;
            margin-bottom: 0.6rem;
            color: #ecf0f1;
        }

        .footer p {
            font-size: 0.85rem;
            line-height: 1.4;
            margin-bottom: 0.6rem;
            opacity: 0.9;
        }

        .footer-divider {
            width: 60px;
            height: 2px;
            background: #3498db;
            margin: 0.8rem auto;
            border-radius: 2px;
        }

        .footer-contact {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1rem;
            margin-top: 1rem;
        }

        .footer-whatsapp {
            background: #25D366;
            color: white;
            padding: 0.6rem 1rem;
            border-radius: 20px;
            text-decoration: none;
            font-weight: 500;
            font-size: 0.85rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.4rem;
        }

        .footer-whatsapp:hover {
            background: #22c55e;
            transform: translateY(-2px);
            box-shadow: 0 3px 10px rgba(37, 211, 102, 0.3);
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Section Styles */
        .section {
            margin: 2rem 0;
            background: white;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .section-header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 1rem;
            text-align: center;
        }

        .section-header h2 {
            font-size: 1.4rem;
            margin-bottom: 0.3rem;
        }

        .section-header p {
            font-size: 0.9rem;
            opacity: 0.9;
            margin: 0;
        }

        .section-notice {
            background: #fff3cd;
            border: 1px solid #ffeeba;
            color: #856404;
            padding: 0.8rem;
            margin: 0.8rem;
            border-radius: 5px;
            font-weight: 500;
            font-size: 0.9rem;
        }

        .adult-notice {
            background: #f8d7da;
            border: 1px solid #f5c6cb;
            color: #721c24;
        }

        /* Product Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 1.2rem;
            padding: 1.5rem;
        }

        .product-card {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            overflow: hidden;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .product-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.15);
        }

        .product-image {
            width: 100%;
            height: 150px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .product-info {
            padding: 1rem;
        }

        .product-name {
            font-size: 1rem;
            font-weight: bold;
            margin-bottom: 0.4rem;
            color: #333;
        }

        .product-price {
            font-size: 1.2rem;
            font-weight: bold;
            color: #4CAF50;
            margin-bottom: 0.8rem;
        }

        .product-buttons {
            display: flex;
            flex-direction: column;
            gap: 0.6rem;
        }

        .btn {
            padding: 0.6rem 1rem;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            text-decoration: none;
            text-align: center;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 0.4rem;
        }

        .btn-primary {
            background: #667eea;
            color: white;
        }

        .btn-primary:hover {
            background: #5a6fd8;
            transform: translateY(-2px);
        }

        .btn-whatsapp {
            background: #25D366;
            color: white;
        }

        .btn-whatsapp:hover {
            background: #22c55e;
            transform: translateY(-2px);
        }

        /* Floating Cart Button */
        .floating-cart {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #20B2AA;
            color: white;
            border: none;
            border-radius: 50px;
            padding: 15px 20px;
            font-size: 1rem;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(32, 178, 170, 0.3);
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .floating-cart:hover {
            background: #1E9E96;
            transform: scale(1.05);
        }

        .cart-badge {
            background: white;
            color: #20B2AA;
            border-radius: 50%;
            padding: 2px 8px;
            margin-left: 8px;
            font-size: 0.9rem;
            font-weight: bold;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 2000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
        }

        .modal-content {
            background-color: white;
            margin: 5% auto;
            padding: 0;
            border-radius: 10px;
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            background: #667eea;
            color: white;
            padding: 1.5rem;
            border-radius: 10px 10px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close {
            color: white;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }

        .close:hover {
            opacity: 0.7;
        }

        .modal-body {
            padding: 2rem;
        }

        .cart-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid #eee;
            gap: 1rem;
        }

        .cart-item img {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 5px;
        }

        .cart-item-info {
            flex: 1;
        }

        .cart-item-name {
            font-weight: bold;
            margin-bottom: 0.25rem;
        }

        .cart-item-price {
            color: #4CAF50;
            font-weight: 500;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quantity-btn {
            background: #667eea;
            color: white;
            border: none;
            border-radius: 3px;
            width: 30px;
            height: 30px;
            cursor: pointer;
            font-weight: bold;
        }

        .quantity-btn:hover {
            background: #5a6fd8;
        }

        .cart-total {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 1.5rem 0;
            padding: 1rem;
            background: #f8f9fa;
            border-radius: 5px;
        }

        .cart-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* Strategic Message */
        .strategic-message {
            background: linear-gradient(135deg, #ff7b7b 0%, #ff6b6b 100%);
            color: white;
            padding: 1.2rem;
            margin: 2rem 0;
            border-radius: 8px;
            text-align: center;
            box-shadow: 0 3px 10px rgba(255, 107, 107, 0.2);
        }

        .strategic-message h3 {
            font-size: 1.2rem;
            margin-bottom: 0.8rem;
        }

        .strategic-message p {
            font-size: 0.95rem;
            line-height: 1.5;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-top {
                gap: 0.6rem;
            }

            .header-logo {
                width: 35px;
                height: 35px;
            }

            .header h1 {
                font-size: 1.4rem;
            }

            .products-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 1rem;
                padding: 1rem;
            }

            .floating-cart {
                bottom: 15px;
                right: 15px;
                padding: 12px 16px;
                font-size: 0.9rem;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
            }

            .cart-actions {
                flex-direction: column;
            }

            .btn {
                font-size: 0.9rem;
                padding: 0.7rem 1.2rem;
            }
        }

        @media (max-width: 480px) {
            .header {
                padding: 0.5rem 0;
            }

            .header-top {
                gap: 0.5rem;
                flex-direction: column;
            }

            .header-logo {
                width: 30px;
                height: 30px;
            }

            .header h1 {
                font-size: 1.2rem;
            }

            .header p {
                font-size: 0.8rem;
            }

            .footer-contact {
                flex-direction: column;
                gap: 1rem;
            }

            .footer-whatsapp {
                padding: 0.7rem 1.2rem;
                font-size: 0.9rem;
            }

            .products-grid {
                grid-template-columns: 1fr;
                padding: 0.8rem 0.5rem;
                gap: 0.8rem;
            }

            .product-info {
                padding: 0.8rem;
            }

            .product-image {
                height: 120px;
            }

            .product-name {
                font-size: 0.9rem;
            }

            .product-price {
                font-size: 1.1rem;
                margin-bottom: 0.6rem;
            }

            .product-buttons {
                gap: 0.5rem;
            }

            .btn {
                font-size: 0.8rem;
                padding: 0.5rem 0.8rem;
            }
        }

        /* Empty Cart Styles */
        .empty-cart {
            text-align: center;
            padding: 3rem;
            color: #666;
        }

        .empty-cart i {
            font-size: 3rem;
            margin-bottom: 1rem;
            color: #ccc;
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-top">
                <img src="logo-diobshop.png" alt="DIOBSHOP Logo" class="header-logo">
                <h1>DIOBSHOP</h1>
            </div>
            <p>Votre catalogue professionnel de confiance - Qualit√©, Service et Satisfaction garantis</p>
        </div>
    </header>

    <div class="container">
        <!-- Section 1: Articles disponibles -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-box"></i> Articles Disponibles</h2>
                <p>Produits en stock, livraison imm√©diate</p>
            </div>
            <div class="products-grid" id="available-products">
                <!-- Products will be generated by JavaScript -->
            </div>
        </section>

        <!-- Section 2: Articles sous commande sp√©ciale -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-clock"></i> Articles √† Avoir Uniquement Sous Commande Sp√©ciale</h2>
                <p>Commandes sur mesure avec conditions sp√©ciales</p>
            </div>
            <div class="section-notice">
                <i class="fas fa-info-circle"></i>
                <strong>Information importante :</strong> Ces articles ne sont pas en stock. Pour toute commande sp√©ciale, un acompte de 25% du montant total est requis pour confirmation et le montant total de la commande doit √™tre au minimum 50 000 FCFA.
            </div>
            <div class="products-grid" id="special-order-products">
                <!-- Products will be generated by JavaScript -->
            </div>
        </section>

        <!-- Section 3: Livres adultes -->
        <section class="section">
            <div class="section-header">
                <h2><i class="fas fa-book"></i> Livres Adultes (Interdits aux moins de 18 ans)</h2>
                <p>Contenu r√©serv√© aux adultes - Livres num√©riques</p>
            </div>
            <div class="section-notice adult-notice">
                <i class="fas fa-exclamation-triangle"></i>
                <strong>ATTENTION :</strong> Il s'agit de livres num√©riques. L'acheteur recevra le produit d√®s que le paiement sera effectu√©.
            </div>
            <div class="products-grid" id="adult-books">
                <!-- Products will be generated by JavaScript -->
            </div>
        </section>

        <!-- Strategic Message -->
        <div class="strategic-message">
            <h3><i class="fas fa-star"></i> Remarque Importante</h3>
            <p>Au-del√† de ces articles √† caract√®re typiquement √©rotique, vous pouvez commander chez nous tout type d'article (machine, voiture, etc.). Il suffit de nous envoyer les images des articles que vous souhaitez commander et nous vous proposerons nos prix et conditions.</p>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <h3><i class="fas fa-heart"></i> Merci de votre visite !</h3>
            <div class="footer-divider"></div>
            <p>Nous vous remercions sinc√®rement d'avoir parcouru notre catalogue DIOBSHOP. Votre confiance est notre priorit√© et nous sommes l√† pour vous accompagner dans tous vos achats.</p>
            <p>Pour toute question ou commande personnalis√©e, n'h√©sitez pas √† nous contacter directement via WhatsApp. Notre √©quipe est √† votre disposition pour vous offrir le meilleur service.</p>
            <div class="footer-contact">
                <a href="https://wa.me/message/MDOD6SN7S6BSD1" class="footer-whatsapp" target="_blank">
                    <i class="fab fa-whatsapp"></i>
                    Contactez-nous maintenant
                </a>
            </div>
            <div style="margin-top: 1rem; padding-top: 0.8rem; border-top: 1px solid #34495e; opacity: 0.7;">
                <p style="font-size: 0.75rem; margin: 0;">¬© 2024 DIOBSHOP - Tous droits r√©serv√©s | Service client professionnel</p>
            </div>
        </div>
    </footer>

    <!-- Floating Cart Button -->
    <button class="floating-cart" onclick="openCart()">
        <i class="fas fa-shopping-cart"></i>
        Panier
        <span class="cart-badge" id="cart-count">0</span>
    </button>

    <!-- Cart Modal -->
    <div id="cartModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-shopping-cart"></i> Mon Panier</h2>
                <span class="close" onclick="closeCart()">&times;</span>
            </div>
            <div class="modal-body">
                <div id="cart-items"></div>
                <div id="cart-summary"></div>
                <div class="cart-actions">
                    <button class="btn btn-primary" onclick="shareCart()">
                        <i class="fas fa-share-alt"></i> Partager le Panier
                    </button>
                    <button class="btn btn-whatsapp" onclick="sendCartToWhatsApp()">
                        <i class="fab fa-whatsapp"></i> Commander sur WhatsApp
                    </button>
                    <button class="btn" style="background: #dc3545; color: white;" onclick="clearCart()">
                        <i class="fas fa-trash"></i> Vider le Panier
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Chargement du catalogue de produits depuis le dossier Catalogue -->
    <script src="Catalogue/produits.js"></script>

    <script>
        // Utilisation des donn√©es du catalogue externe
        const products = catalogueProduits;

        // Cart management
        let cart = JSON.parse(localStorage.getItem('diobshop_cart')) || [];
        let cartId = localStorage.getItem('diobshop_cart_id') || generateCartId();

        // Generate unique cart ID
        function generateCartId() {
            const id = 'cart_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            localStorage.setItem('diobshop_cart_id', id);
            return id;
        }

        // Initialize the application
        function init() {
            renderProducts();
            updateCartDisplay();
            checkSharedCart();
        }

        // Check if accessing a shared cart
        function checkSharedCart() {
            const urlParams = new URLSearchParams(window.location.search);
            const sharedCartId = urlParams.get('cartId');

            if (sharedCartId) {
                const sharedCart = localStorage.getItem('diobshop_shared_' + sharedCartId);
                if (sharedCart) {
                    cart = JSON.parse(sharedCart);
                    cartId = sharedCartId;
                    localStorage.setItem('diobshop_cart', JSON.stringify(cart));
                    localStorage.setItem('diobshop_cart_id', cartId);
                    updateCartDisplay();
                    alert('Panier partag√© charg√© avec succ√®s !');
                } else {
                    alert('Panier partag√© introuvable.');
                }
            }
        }

        // Render all products
        function renderProducts() {
            renderProductSection('available-products', products.available, 'available');
            renderProductSection('special-order-products', products.specialOrder, 'special');
            renderProductSection('adult-books', products.adultBooks, 'adult');
        }

        // Render products for a specific section
        function renderProductSection(containerId, productList, category) {
            const container = document.getElementById(containerId);
            container.innerHTML = '';

            productList.forEach(product => {
                const productCard = createProductCard(product, category);
                container.appendChild(productCard);
            });
        }

        // Create product card element
        function createProductCard(product, category) {
            const card = document.createElement('div');
            card.className = 'product-card';

            const whatsappButtonText = category === 'special' ? 'Commander sur WhatsApp' :
                                     category === 'adult' ? 'Commander sur WhatsApp' :
                                     'Passer √† l\'achat sur WhatsApp';

            card.innerHTML = `
                <img src="${product.image}" alt="${product.name}" class="product-image" onerror="this.src='https://via.placeholder.com/300x200?text=Image+Indisponible'">
                <div class="product-info">
                    <div class="product-name">${product.name}</div>
                    <div class="product-price">${formatPrice(product.price)} FCFA</div>
                    <div class="product-buttons">
                        <button class="btn btn-primary" onclick="addToCart('${product.id}')">
                            <i class="fas fa-cart-plus"></i> Ajouter au panier
                        </button>
                        <button class="btn btn-whatsapp" onclick="buyDirectWhatsApp('${product.id}')">
                            <i class="fab fa-whatsapp"></i> ${whatsappButtonText}
                        </button>
                    </div>
                </div>
            `;

            return card;
        }

        // Format price with thousands separator
        function formatPrice(price) {
            return Number(price).toLocaleString('fr-FR');
        }

        // Find product by ID
        function findProduct(productId) {
            const allProducts = [...products.available, ...products.specialOrder, ...products.adultBooks];
            return allProducts.find(p => p.id === productId);
        }

        // Add product to cart
        function addToCart(productId) {
            const product = findProduct(productId);
            if (!product) return;

            const existingItem = cart.find(item => item.id === productId);

            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    ...product,
                    quantity: 1
                });
            }

            saveCart();
            updateCartDisplay();

            // Visual feedback
            const button = event.target;
            const originalText = button.innerHTML;
            button.innerHTML = '<i class="fas fa-check"></i> Ajout√© !';
            button.style.background = '#4CAF50';

            setTimeout(() => {
                button.innerHTML = originalText;
                button.style.background = '';
            }, 1500);
        }

        // Save cart to localStorage
        function saveCart() {
            localStorage.setItem('diobshop_cart', JSON.stringify(cart));
            localStorage.setItem('diobshop_shared_' + cartId, JSON.stringify(cart));
        }

        // Update cart display
        function updateCartDisplay() {
            const cartCount = cart.reduce((total, item) => total + item.quantity, 0);
            document.getElementById('cart-count').textContent = cartCount;
        }

        // Open cart modal
        function openCart() {
            renderCartItems();
            document.getElementById('cartModal').style.display = 'block';
        }

        // Close cart modal
        function closeCart() {
            document.getElementById('cartModal').style.display = 'none';
        }

        // Render cart items
        function renderCartItems() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartSummaryContainer = document.getElementById('cart-summary');

            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="empty-cart">
                        <i class="fas fa-shopping-cart"></i>
                        <h3>Votre panier est vide</h3>
                        <p>Ajoutez des articles pour commencer vos achats</p>
                    </div>
                `;
                cartSummaryContainer.innerHTML = '';
                return;
            }

            // Render cart items
            cartItemsContainer.innerHTML = cart.map(item => `
                <div class="cart-item">
                    <img src="${item.image}" alt="${item.name}" onerror="this.src='https://via.placeholder.com/60x60'">
                    <div class="cart-item-info">
                        <div class="cart-item-name">${item.name}</div>
                        <div class="cart-item-price">${formatPrice(item.price)} FCFA</div>
                    </div>
                    <div class="quantity-controls">
                        <button class="quantity-btn" onclick="updateQuantity('${item.id}', ${item.quantity - 1})">-</button>
                        <span style="margin: 0 10px; font-weight: bold;">${item.quantity}</span>
                        <button class="quantity-btn" onclick="updateQuantity('${item.id}', ${item.quantity + 1})">+</button>
                    </div>
                    <button class="btn" style="background: #dc3545; color: white; margin-left: 10px;" onclick="removeFromCart('${item.id}')">
                        <i class="fas fa-trash"></i>
                    </button>
                </div>
            `).join('');

            // Render cart summary
            const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            cartSummaryContainer.innerHTML = `
                <div class="cart-total">
                    <div>Total: ${formatPrice(total)} FCFA</div>
                    <div style="font-size: 0.9rem; margin-top: 0.5rem; color: #666;">
                        ID Panier: ${cartId}
                    </div>
                </div>
            `;
        }

        // Update item quantity
        function updateQuantity(productId, newQuantity) {
            if (newQuantity <= 0) {
                removeFromCart(productId);
                return;
            }

            const item = cart.find(item => item.id === productId);
            if (item) {
                item.quantity = newQuantity;
                saveCart();
                updateCartDisplay();
                renderCartItems();
            }
        }

        // Remove item from cart
        function removeFromCart(productId) {
            cart = cart.filter(item => item.id !== productId);
            saveCart();
            updateCartDisplay();
            renderCartItems();
        }

        // Clear entire cart
        function clearCart() {
            if (confirm('√ätes-vous s√ªr de vouloir vider votre panier ?')) {
                cart = [];
                cartId = generateCartId();
                saveCart();
                updateCartDisplay();
                renderCartItems();
            }
        }

        // Share cart
        function shareCart() {
            if (cart.length === 0) {
                alert('Votre panier est vide !');
                return;
            }

            const shareUrl = window.location.origin + window.location.pathname + '?cartId=' + cartId;

            if (navigator.share) {
                navigator.share({
                    title: 'Mon Panier DIOBSHOP',
                    text: 'Consultez mon panier sur DIOBSHOP',
                    url: shareUrl
                });
            } else {
                // Fallback for browsers that don't support Web Share API
                navigator.clipboard.writeText(shareUrl).then(() => {
                    alert('Lien du panier copi√© ! Partagez-le avec vos contacts.');
                }).catch(() => {
                    prompt('Copiez ce lien pour partager votre panier:', shareUrl);
                });
            }
        }

        // Direct WhatsApp purchase for single item
        function buyDirectWhatsApp(productId) {
            const product = findProduct(productId);
            if (!product) return;

            const message = createWhatsAppMessage([{...product, quantity: 1}], productId);
            const whatsappUrl = `https://wa.me/message/MDOD6SN7S6BSD1?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Send entire cart to WhatsApp
        function sendCartToWhatsApp() {
            if (cart.length === 0) {
                alert('Votre panier est vide !');
                return;
            }

            const message = createWhatsAppMessage(cart);
            const whatsappUrl = `https://wa.me/message/MDOD6SN7S6BSD1?text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
        }

        // Create WhatsApp message
        function createWhatsAppMessage(items, productId = null) {
            const availableItems = items.filter(item => item.category === 'available');
            const specialItems = items.filter(item => item.category === 'special');
            const adultItems = items.filter(item => item.category === 'adult');

            let message = `üõí *COMMANDE DIOBSHOP*\n`;
            message += `ID Panier: ${cartId}\n\n`;

            if (availableItems.length > 0) {
                message += `üì¶ *ARTICLES DISPONIBLES*\n`;
                message += `(Livraison imm√©diate)\n\n`;

                availableItems.forEach(item => {
                    message += `‚Ä¢ ${item.name}\n`;
                    message += `  Prix: ${formatPrice(item.price)} FCFA\n`;
                    message += `  Quantit√©: ${item.quantity}\n`;
                    message += `  Sous-total: ${formatPrice(item.price * item.quantity)} FCFA\n`;
                    message += `  Image: ${item.image}\n\n`;
                });
            }

            if (specialItems.length > 0) {
                message += `‚è∞ *COMMANDES SP√âCIALES*\n`;
                message += `(Acompte 25% requis - Minimum 50,000 FCFA)\n\n`;

                specialItems.forEach(item => {
                    message += `‚Ä¢ ${item.name}\n`;
                    message += `  Prix: ${formatPrice(item.price)} FCFA\n`;
                    message += `  Quantit√©: ${item.quantity}\n`;
                    message += `  Sous-total: ${formatPrice(item.price * item.quantity)} FCFA\n`;
                    message += `  Acompte requis: ${formatPrice((item.price * item.quantity) * 0.25)} FCFA\n`;
                    message += `  Image: ${item.image}\n\n`;
                });
            }

            if (adultItems.length > 0) {
                message += `üìö *LIVRES NUM√âRIQUES ADULTES*\n`;
                message += `(Livraison imm√©diate apr√®s paiement)\n\n`;

                adultItems.forEach(item => {
                    message += `‚Ä¢ ${item.name}\n`;
                    message += `  Prix: ${formatPrice(item.price)} FCFA\n`;
                    message += `  Quantit√©: ${item.quantity}\n`;
                    message += `  Sous-total: ${formatPrice(item.price * item.quantity)} FCFA\n`;
                    message += `  Image: ${item.image}\n\n`;
                });
            }

            const total = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            message += `üí∞ *TOTAL G√âN√âRAL: ${formatPrice(total)} FCFA*\n\n`;

            if (specialItems.length > 0) {
                const totalSpecial = specialItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                const acompteTotal = totalSpecial * 0.25;
                message += `üí≥ *Acompte total requis: ${formatPrice(acompteTotal)} FCFA*\n\n`;
            }

            // Ajout du lien direct vers le panier ou le produit
            let siteUrl = window.location.origin + window.location.pathname;
            if (productId) {
                message += `üîó Lien vers le produit: ${siteUrl}?productId=${productId}\n`;
            } else {
                message += `üîó Lien vers le panier: ${siteUrl}?cartId=${cartId}\n`;
            }

            message += `üìû Merci de confirmer cette commande et de nous indiquer vos pr√©f√©rences de livraison.`;

            return message;
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('cartModal');
            if (event.target === modal) {
                closeCart();
            }
        }

        // Initialize application when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
